<div class="calculator-card">
    <div class="calculator-header">
        <h2><span class="header-icon">üî®</span> Hero Equipment Mastery</h2>
        <p class="description">Calculate forgehammers and mythic gear needed for hero equipment mastery upgrades (Levels 1-20)</p>
    </div>

    <div class="calculator-form">
        <div class="form-row">
            <div class="form-group">
                <label for="currentMastery">Current Mastery Level</label>
                <input type="number" id="currentMastery" min="1" max="20" value="1" required>
            </div>
            <div class="form-group">
                <label for="targetMastery">Target Mastery Level</label>
                <input type="number" id="targetMastery" min="1" max="20" value="10" required>
            </div>
        </div>

        <div class="form-row">
            <div class="form-group">
                <label for="monthlyIncome">Monthly Hammer Income</label>
                <input type="number" id="monthlyIncome" min="0" value="200" required>
                <small>Average from Bear Trap: 150-300/month</small>
            </div>
        </div>

        <!-- Hero Gear Piece Selection -->
        <div style="margin-top: 20px; padding: 15px; background: #f8f9fa; border-radius: 5px;">
            <h4 style="margin-top: 0;">üéñÔ∏è Hero Gear Pieces to Upgrade</h4>
            <p style="font-size: 12px; color: #666; margin-bottom: 15px;">Select which gear pieces you want to upgrade. Each piece is calculated separately.</p>
            
            <div id="gearPieceSelection" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px;">
                <!-- Populated by JavaScript -->
            </div>

            <div style="margin-top: 15px; padding-top: 15px; border-top: 1px solid #ddd;">
                <strong>Selected Pieces: </strong>
                <span id="selectedPiecesCount" style="color: #0d6efd; font-weight: bold;">0</span>
                <button type="button" id="selectAllPieces" class="btn btn-sm" style="margin-left: 10px; padding: 5px 10px; font-size: 12px;">Select All (12)</button>
                <button type="button" id="clearAllPieces" class="btn btn-sm" style="margin-left: 5px; padding: 5px 10px; font-size: 12px;">Clear All</button>
            </div>
        </div>

        <div class="button-group" style="margin-top: 20px;">
            <button id="calculateForgehammer" class="btn btn-primary">Calculate</button>
            <button id="saveForgehammer" class="btn btn-success">Save Results</button>
        </div>
    </div>

    <!-- Results Section -->
    <div id="forgehammerResults" class="results-section hidden">
        <h3>üìä Results</h3>
        
        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 15px; margin-bottom: 20px;">
            <div class="result-card">
                <div class="result-label">Selected Pieces</div>
                <div id="resultPieces" class="result-value">0</div>
            </div>
            <div class="result-card">
                <div class="result-label">Per Piece</div>
                <div style="font-size: 14px; margin-top: 10px;">
                    <div>üî® <span id="hammersPerPiece">0</span></div>
                    <div>‚öôÔ∏è <span id="gearPerPiece">0</span></div>
                </div>
            </div>
            <div class="result-card">
                <div class="result-label">Total Needed</div>
                <div style="font-size: 14px; margin-top: 10px;">
                    <div>üî® <span id="totalHammers">0</span></div>
                    <div>‚öôÔ∏è <span id="mythicGear">0</span></div>
                </div>
            </div>
            <div class="result-card">
                <div class="result-label">Timeline</div>
                <div id="timeline" class="result-value">0 months</div>
            </div>
        </div>

        <!-- Breakdown Table -->
        <div class="breakdown-section">
            <h4>Level Breakdown (Per Piece)</h4>
            <div class="table-responsive">
                <table id="forgehammerBreakdown" class="breakdown-table">
                    <thead>
                        <tr>
                            <th>Level</th>
                            <th>Hammers Per Piece</th>
                            <th>Mythic Gear Per Piece</th>
                            <th>Cumulative (Per Piece)</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Populated by JavaScript -->
                    </tbody>
                </table>
            </div>
        </div>

        <div class="tips-section">
            <h4>üìà Stat Increases by Mastery Level</h4>
            <div class="stat-info">
                <div class="tip-card">
                    <strong>Level 1-5:</strong> Base ATK/DEF increases, unlock basic mastery skills
                </div>
                <div class="tip-card">
                    <strong>Level 6-10:</strong> Troop capacity +5% per level, ATK +2-3% per level
                </div>
                <div class="tip-card">
                    <strong>Level 11-15:</strong> Special skills unlock, Troop DMG +4-5% per level
                </div>
                <div class="tip-card">
                    <strong>Level 16-20:</strong> Elite tier, Troop HP +5-8% per level, Critical +10-15%
                </div>
            </div>
        </div>

        <button id="exportForgehammer" class="btn btn-secondary">Export Results</button>
    </div>
</div>
